import JsonToString from "../../../../components/JsonToString"

# Firebase

## FirebaseDbClient

### 1. Credential ë§Œë“¤ê¸°

serviceAccountKey.jsonì˜ ë‚´ìš©ì„ stringìœ¼ë¡œ ë³€í™˜í•˜ì—¬ credentialì„ ë§Œë“­ë‹ˆë‹¤.

ì•„ë˜ textareaì—ì„œ stringìœ¼ë¡œ ë³€í™˜ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<JsonToString />

### 2. DATABASE_ID ì…ë ¥

### 3. Firestore ì¸ë±ìŠ¤ ì„¤ì •

ì´ ì•±ì€ íŠ¹ì • ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ **ë³µí•© ìƒ‰ì¸(Compound Index)** ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.  
ë‹¤ìŒ ìƒ‰ì¸ì„ Firebase ì½˜ì†”ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ì¶”ê°€í•˜ê±°ë‚˜, ì•± ì‹¤í–‰ ì¤‘ Firestore ì—ëŸ¬ ë©”ì‹œì§€ì—ì„œ ì œê³µë˜ëŠ” "ìƒ‰ì¸ ìƒì„±(Index creation)" ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ ìë™ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### âœ… í•„ìš”í•œ ìƒ‰ì¸ ëª©ë¡ (ì»¬ë ‰ì…˜ ID: `bundles`)

#### 1. ìƒ‰ì¸ ì¡°í•© 1
- `channel` (ì˜¤ë¦„ì°¨ìˆœ)
- `runtimeVersion` (ì˜¤ë¦„ì°¨ìˆœ)
- `supportIos` (ì˜¤ë¦„ì°¨ìˆœ)
- `createdAt` (ë‚´ë¦¼ì°¨ìˆœ)
- `__name__` (ë‚´ë¦¼ì°¨ìˆœ)

#### 2. ìƒ‰ì¸ ì¡°í•© 2
- `channel` (ì˜¤ë¦„ì°¨ìˆœ)
- `createdAt` (ë‚´ë¦¼ì°¨ìˆœ)
- `__name__` (ë‚´ë¦¼ì°¨ìˆœ)

#### 3. ìƒ‰ì¸ ì¡°í•© 3
- `channel` (ì˜¤ë¦„ì°¨ìˆœ)
- `runtimeVersion` (ì˜¤ë¦„ì°¨ìˆœ)
- `supportAndroid` (ì˜¤ë¦„ì°¨ìˆœ)
- `createdAt` (ë‚´ë¦¼ì°¨ìˆœ)

---

### ğŸ› ï¸ ìƒ‰ì¸ ìƒì„± ë°©ë²•
1. [Firebase ì½˜ì†”](https://console.firebase.google.com/)ì— ì ‘ì†í•©ë‹ˆë‹¤.
2. Firestore Database > **ìƒ‰ì¸(Index)** íƒ­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
3. **ìƒ‰ì¸ ì¶”ê°€** ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
4. ìœ„ í•„ë“œ ì¡°í•©ì„ ì…ë ¥í•˜ì—¬ ê°ê°ì˜ ìƒ‰ì¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤.



```ts
import { FirebaseDbClient } from "@cloud-push/cloud";

const dbClient = new FirebaseDbClient({
  credential: process.env.FIREBASE_CREDENTIAL!,
  databaseId: process.env.FIREBASE_DATABASE_ID!,
});
```

## Examples

```ts
import { defineConfig } from "@cloud-push/cli";
import { FirebaseStorageClient, FirebaseDbClient } from "@cloud-push/cloud";

export default defineConfig(() => ({
  	loadClients: () => {
		const storageClient = new FirebaseStorageClient({
			credential: process.env.FIREBASE_CREDENTIAL!,
			bucketName: process.env.BUCKET_NAME!,
		});

		const dbClient = new FirebaseDbClient({
			credential: process.env.FIREBASE_CREDENTIAL!,
			databaseId: process.env.FIREBASE_DATABASE_ID!,
		});

		return {
			storage: storageClient,
			db: dbClient,
		};
	},
}));
```

